{"version":3,"sources":["api/http.js","api/api.js","pages/index/index.tsx","pages/list/index.js","pages/public/500.js","router/index.js","App.tsx","reportWebVitals.ts","index.tsx"],"names":["get","url","data","Promise","resolve","reject","axios","params","then","res","catch","err","defaults","baseURL","headers","common","timeout","downLoadAWorlApi","downLoadAllApi","post","Search","Meta","SearchCom","props","useState","searchKey","setKey","total","setTotal","pageIndex","setPageIndex","pageSize","changeList","useEffect","getData","key","from","size","count","placeholder","allowClear","style","width","value","enterButton","onInput","event","target","onSearch","className","children","showTotal","defaultPageSize","defaultCurrent","onChange","page","ContentBox","dataList","listProp","xs","sm","md","lg","xl","gutter","map","v","index","List","history","useHistory","hoverable","onClick","push","pathname","cartoonId","title","cover","alt","src","description","descs","HomePage","state","list","setState","this","Component","throttle","fn","delay","valid","message","warning","arguments","setTimeout","dataArr","height","lineHeight","borderRadius","backgroundColor","color","textAlign","fontSize","DrawerCom","childRef","aDown","isNowDown","visible","setVisible","setTitle","setList","loading","setLoading","setParams","useImperativeHandle","getValue","item","showDrawer","chapterId","content","placement","window","innerWidth","closable","onClose","footer","disabled","type","icon","DownloadOutlined","spinning","preview","DrawerProgress","setDownStatus","progressNum","setProgressNum","ws","WebSocket","onopen","console","log","onmessage","evt","JSON","parse","success","Number","progress","unshift","allPage","downPage","onclose","error","percent","itemLayout","dataSource","renderItem","Item","Text","mark","DataListCom","checkedArr","allDownLoading","aDownThrottle","isAllChecked","React","createRef","childProgressRef","e","i","checked","filter","id","onAllChange","zj_tit","code","massage","allDown","length","arr","detail","current","getProgress","match","onBack","goBack","extra","prefix","onConfirm","onCancel","okText","cancelText","grid","xxl","justify","align","span","indeterminate","Error500","status","subTitle","App","path","component","Error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bd49114b.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  axios.defaults.baseURL = \"/api\";\r\n} else if (process.env.NODE_ENV === \"test\") {\r\n  axios.defaults.baseURL = \"http://test998/\";\r\n} else if (process.env.NODE_ENV === \"production\") {\r\n  axios.defaults.baseURL = \"http://localhost/\";\r\n} else if (process.env.NODE_ENV === \"build\") {\r\n  axios.defaults.baseURL = \"http://build/demo\";\r\n}\r\n\r\naxios.defaults.headers.common['Content-Type'] = 'application/json;charset=UTF-8'\r\naxios.defaults.timeout = 20000;\r\n\r\nexport function get(url, data) {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get(url, {\r\n        params:data\r\n      })\r\n      .then((res) => {\r\n        resolve(res.data);\r\n      })\r\n      .catch((err) => {\r\n        reject(err);\r\n      });\r\n  });\r\n}\r\nexport function post(url, data) {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .post(url, data)\r\n      .then((res) => {\r\n        resolve(res.data);\r\n      })\r\n      .catch((err) => {\r\n        reject(err);\r\n      });\r\n  });\r\n}\r\n","import { get, post } from \"./http\";\r\n\r\nexport const searchApi = (data) => get(`/api/pingccApi/search`,data);\r\nexport const listApi = (data) => get(`/api/pingccApi/list?cartoonId=${data}`);\r\nexport const detailApi = (data) =>\r\n  get(`/api/pingccApi/detail?chapterId=${data}`);\r\nexport const downLoadAWorlApi = (data) => get(`/api/downLoadAWorl`, data);\r\nexport const downLoadAllApi = (data) => post(`/api/downLoadAll`, data);\r\n","import React, { Component, useState, useEffect, useRef } from \"react\";\r\nimport { Space, Input, Pagination, Row, Col, Card } from \"antd\";\r\nimport \"./index.css\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { searchApi } from \"./../../api/api.js\";\r\n\r\nconst { Search } = Input;\r\n\r\nconst { Meta } = Card;\r\n/**\r\n * 检索框\r\n */\r\n//查询的回调函数\r\ninterface searchProps {\r\n  changeList: Function;\r\n}\r\n// children: any;\r\nconst SearchCom: React.FC<searchProps> = (props) => {\r\n  const [searchKey, setKey] = useState<String>(\"\");\r\n  const [total, setTotal] = useState<number>(0);\r\n  const [pageIndex, setPageIndex] = useState<number>(1);\r\n  const [pageSize] = useState<number>(12);\r\n  const { changeList } = props;\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n  /**\r\n   * 初始化执行回调\r\n   * searchKey 第一次 更新会走这个方法（回显）\r\n   */\r\n  const getData = () => {\r\n    searchApi({\r\n      key: searchKey,\r\n      from: pageIndex,\r\n      size: pageSize,\r\n    }).then((res: any) => {\r\n      const { count, data } = res.data || {\r\n        count: 0,\r\n        data: [],\r\n      };\r\n      setTotal(count);\r\n      changeList(data);\r\n    });\r\n  };\r\n  const oninputChange = (event: any) => {\r\n    setKey(event.target.value);\r\n  };\r\n  return (\r\n    <>\r\n      <Search\r\n        placeholder=\"请输入查询条件\"\r\n        allowClear\r\n        style={{ width: 300 }}\r\n        value={searchKey as any}\r\n        enterButton=\"Search\"\r\n        onInput={oninputChange}\r\n        onSearch={() => {\r\n          getData();\r\n        }}\r\n      />\r\n      <div className=\"content\">{props.children}</div>\r\n      <Pagination\r\n        className=\"textAlignR\"\r\n        total={total}\r\n        showTotal={(total) => `总共 ${total} 本`}\r\n        defaultPageSize={pageSize}\r\n        defaultCurrent={pageIndex}\r\n        onChange={(page) => {\r\n          setPageIndex(page);\r\n          getData();\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\ninterface contentProps {\r\n  dataList: Array<any>;\r\n}\r\nconst ContentBox: React.FC<contentProps> = (props) => {\r\n  const { dataList } = props;\r\n  // console.log(dataList);\r\n  let listProp = {\r\n    xs: 12,\r\n    sm: 8,\r\n    md: 6,\r\n    lg: 6,\r\n    xl: 4,\r\n  };\r\n  return (\r\n    <Space>\r\n      <Row gutter={[20, 20]}>\r\n        {dataList.map((v, index) => (\r\n          <Col {...listProp} key={index}>\r\n            <List {...v} />\r\n          </Col>\r\n        ))}\r\n      </Row>\r\n    </Space>\r\n  );\r\n};\r\n\r\ninterface listProps {\r\n  author: String;\r\n  cartoonId: String;\r\n  cartoonType: String;\r\n  cartoonVariableId: Number;\r\n  cover: String;\r\n  creationTime: String;\r\n  descs: String;\r\n  id: Number;\r\n  title: String;\r\n  updateTime: String;\r\n  history: Object;\r\n}\r\nconst List: React.FC<listProps> = (props) => {\r\n  const history = useHistory();\r\n  function handleClick() {\r\n    history.push({\r\n      pathname: `/list/${props.cartoonId}/${props.title}`,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      hoverable\r\n      onClick={handleClick}\r\n      style={{ width: \"100%\" }}\r\n      cover={<img alt=\"example\" src={props.cover as string} />}\r\n    >\r\n      <Meta title={props.title} description={props.descs} />\r\n    </Card>\r\n  );\r\n};\r\n//类型推断\r\n/* <类型>值\r\n// 或者\r\n值 as 类型 */\r\n\r\ntype SecurityLayoutState = {\r\n  pageIndex: Number;\r\n  dataList: Array<any>;\r\n  count: Number;\r\n  pageSize: Number;\r\n};\r\n\r\nclass HomePage extends Component {\r\n  state: SecurityLayoutState = {\r\n    dataList: [],\r\n    pageIndex: 1,\r\n    count: 0,\r\n    pageSize: 10,\r\n  };\r\n  changeList = (list: Array<any>) => {\r\n    this.setState({\r\n      dataList: list,\r\n    });\r\n  };\r\n  render(): React.ReactNode {\r\n    return (\r\n      <div className=\"padding20\">\r\n        <SearchCom changeList={this.changeList}>\r\n          <ContentBox dataList={this.state.dataList} />\r\n        </SearchCom>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HomePage;\r\n","import React, {\r\n  Component,\r\n  useState,\r\n  useImperativeHandle,\r\n  useEffect,\r\n} from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport {\r\n  PageHeader,\r\n  List,\r\n  Button,\r\n  Space,\r\n  Row,\r\n  Col,\r\n  Checkbox,\r\n  BackTop,\r\n  Statistic,\r\n  message,\r\n  Drawer,\r\n  Image,\r\n  Spin,\r\n  Popconfirm,\r\n  Progress,\r\n  Typography,\r\n  Modal,\r\n} from \"antd\";\r\nimport \"./index.css\";\r\nimport {\r\n  listApi,\r\n  downLoadAWorlApi,\r\n  detailApi,\r\n  downLoadAllApi,\r\n} from \"./../../api/api.js\";\r\nimport { DownloadOutlined } from \"@ant-design/icons\";\r\n\r\nfunction throttle(fn, delay = 3000) {\r\n  let valid = true;\r\n  return function () {\r\n    if (!valid) {\r\n      //节流\r\n      message.warning(\"不要点击的太佩服！\");\r\n      return false;\r\n    }\r\n    // 工作时间，执行函数并且在间隔期内把状态位设为无效\r\n    valid = false;\r\n    fn(...arguments);\r\n    setTimeout(() => {\r\n      valid = true;\r\n    }, delay);\r\n  };\r\n}\r\nlet dataArr = [];\r\nconst style = {\r\n  height: 40,\r\n  width: 40,\r\n  lineHeight: \"40px\",\r\n  borderRadius: 4,\r\n  backgroundColor: \"#1088e9\",\r\n  color: \"#fff\",\r\n  textAlign: \"center\",\r\n  fontSize: 14,\r\n};\r\n// 弹框\r\nconst DrawerCom = ({ childRef, aDown, isNowDown }) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [list, setList] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [params, setParams] = useState({});\r\n\r\n  useImperativeHandle(childRef, () => ({\r\n    getValue: (item) => showDrawer(item),\r\n  }));\r\n\r\n  const showDrawer = (item) => {\r\n    let { title, chapterId } = item;\r\n    setVisible(true);\r\n    setTitle(title);\r\n    setList([]);\r\n    setLoading(true);\r\n    setParams(item);\r\n    detailApi(chapterId).then((res) => {\r\n      setList(res.data.data.content);\r\n      setLoading(false);\r\n    });\r\n  };\r\n  const onClose = () => {\r\n    setVisible(false);\r\n  };\r\n  return (\r\n    <>\r\n      <Drawer\r\n        title={title}\r\n        placement=\"right\"\r\n        width={(window.innerWidth / 4) * 3}\r\n        closable={false}\r\n        onClose={onClose}\r\n        visible={visible}\r\n        footer={\r\n          <div\r\n            style={{\r\n              textAlign: \"left\",\r\n            }}\r\n          >\r\n            <Button\r\n              onClick={() => aDown(params)}\r\n              disabled={isNowDown}\r\n              type=\"primary\"\r\n              icon={<DownloadOutlined />}\r\n            >\r\n              Download\r\n            </Button>\r\n          </div>\r\n        }\r\n      >\r\n        <Spin spinning={loading}>\r\n          {list.map((item, index) => (\r\n            <Image\r\n              key={index}\r\n              preview={false}\r\n              width={(window.innerWidth / 4) * 3 - 70}\r\n              src={item}\r\n            />\r\n          ))}\r\n        </Spin>\r\n      </Drawer>\r\n    </>\r\n  );\r\n};\r\n\r\n/**\r\n * 进度弹框\r\n */\r\nconst DrawerProgress = ({ childRef, setDownStatus }) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [list, setList] = useState([]);\r\n  const [progressNum, setProgressNum] = useState(0);\r\n  const history = useHistory();\r\n  useImperativeHandle(childRef, () => ({\r\n    getValue: (item) => showDrawer(item),\r\n  }));\r\n  useEffect(() => {\r\n    //  // 打开一个 web socket  这里端口号和上面监听的需一致\r\n    var ws = new WebSocket(\"ws://localhost:8888/\");\r\n    ws.onopen = function () {\r\n      // Web Socket 已连接上，使用 send() 方法发送数据\r\n      console.log(\"已连接...\");\r\n    };\r\n    ws.onmessage = function (evt) {\r\n      let { data } = evt;\r\n      let item = JSON.parse(data);\r\n      if (item.message) {\r\n        message.success(item.message);\r\n        dataArr = [];\r\n        setDownStatus();\r\n        setList([]);\r\n        // setProgressNum(0);\r\n      } else {\r\n        setProgressNum(Number(item.progress));\r\n        dataArr.unshift(`总页数：${item.allPage} , 已下载：${item.downPage} `);\r\n        setList(dataArr);\r\n        // console.log(\r\n        //   `当前下载进度：${item.progress}%, 总页数：${item.allPage} , 已下载：${item.downPage} `\r\n        // );\r\n      }\r\n    };\r\n\r\n    ws.onclose = function () {\r\n      // 关闭 websocket\r\n      console.log(\"连接已关闭...\");\r\n      // message.error(\"连接已关闭...\");\r\n      Modal.error({\r\n        title: '连接已关闭',\r\n        content: `服务过载，崩掉了。请重启服务！！`,\r\n      })\r\n      history.push({\r\n        pathname: `/error`,\r\n      });\r\n    };\r\n\r\n  }, []);\r\n  const showDrawer = (item) => {\r\n    setVisible(true);\r\n  };\r\n  const onClose = () => {\r\n    setVisible(false);\r\n  };\r\n  return (\r\n    <>\r\n      <Drawer\r\n        title=\"下载进度\"\r\n        placement=\"right\"\r\n        width={(window.innerWidth / 4) * 3}\r\n        closable={false}\r\n        onClose={onClose}\r\n        visible={visible}\r\n      >\r\n        <div className=\"progressBox\">\r\n          <Progress type=\"circle\" percent={progressNum} />\r\n        </div>\r\n\r\n        <List\r\n          className=\"progressList\"\r\n          itemLayout=\"horizontal\"\r\n          dataSource={list}\r\n          renderItem={(item) => (\r\n            <List.Item>\r\n              <Typography.Text mark>{item}</Typography.Text>\r\n            </List.Item>\r\n          )}\r\n        />\r\n      </Drawer>\r\n    </>\r\n  );\r\n};\r\nclass DataListCom extends Component {\r\n  state = {\r\n    title: \"Title\",\r\n    data: [],\r\n    count: 0,\r\n    checkedArr: [],\r\n    loading: false,\r\n    allDownLoading: false,\r\n    aDownThrottle: null,\r\n    isAllChecked: false,\r\n    /**\r\n     * 一次只能有一个下载任务（一个线程）否则，系统会崩\r\n     */\r\n    isNowDown: false, //现在是否有下载任务\r\n  };\r\n  childRef = React.createRef();\r\n  childProgressRef = React.createRef();\r\n\r\n  UNSAFE_componentWillMount() {\r\n    // 节流防抖设置\r\n    // 为了使throttle形成闭包，只调用一次throttle，之后由其引用throttleFn来调用\r\n    this.setState({\r\n      aDownThrottle: throttle(this.aDown),\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    let { id, title } = this.props.match.params;\r\n    this.setState({\r\n      title: title,\r\n      loading: true,\r\n    });\r\n    listApi(id).then((res) => {\r\n      const { count, data } = res.data || {\r\n        count: 0,\r\n        data: [],\r\n      };\r\n      this.setState({\r\n        data: data.map((v) => ({ ...v, checked: false })),\r\n        count: count,\r\n        loading: false,\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * 多选框，勾选\r\n   */\r\n  onChange = (e, item, i) => {\r\n    let { data } = this.state;\r\n    data[i].checked = e.target.checked;\r\n    this.setState({\r\n      data: data,\r\n      checkedArr: data\r\n        .filter((v) => v.checked)\r\n        .map((item) => ({\r\n          id: item.chapterId,\r\n          title: item.title,\r\n        })),\r\n    });\r\n  };\r\n  /**\r\n   * 全选、全不选\r\n   */\r\n  onAllChange = (e) => {\r\n    let checked = e.target.checked;\r\n    let { data } = this.state;\r\n    data = data.map((item) => ({\r\n      ...item,\r\n      checked: checked,\r\n    }));\r\n    this.setState({\r\n      data: data,\r\n      checkedArr: data\r\n        .filter((v) => v.checked)\r\n        .map((item) => ({\r\n          id: item.chapterId,\r\n          title: item.title,\r\n        })),\r\n      isAllChecked: checked,\r\n    });\r\n  };\r\n  /**\r\n   * 单个下载\r\n   */\r\n  aDown = (item) => {\r\n    downLoadAWorlApi({\r\n      id: item.chapterId,\r\n      title: this.state.title,\r\n      zj_tit: item.title,\r\n    }).then((res) => {\r\n      if (res.code === 200) {\r\n        message.success(\"已开始下载！！！\");\r\n        this.setState({\r\n          isNowDown: true,\r\n        });\r\n      } else {\r\n        message.error(res.massage);\r\n      }\r\n    });\r\n  };\r\n  /**\r\n   * 批量下载\r\n   */\r\n  allDown = () => {\r\n    let { title, data, checkedArr } = this.state;\r\n    if (!checkedArr.length) {\r\n      message.error(\"请选择要下载的漫画！\");\r\n      return;\r\n    }\r\n    this.setState({\r\n      allDownLoading: true,\r\n    });\r\n    downLoadAllApi({\r\n      title: title,\r\n      arr: checkedArr,\r\n    }).then(() => {\r\n      message.success(\"已开始批量下载！！！\");\r\n      this.setState({\r\n        data: data.map((v) => ({\r\n          ...v,\r\n          checked: false,\r\n        })),\r\n        allDownLoading: false,\r\n        isNowDown: true,\r\n        checkedArr: [],\r\n        isAllChecked: false,\r\n      });\r\n    });\r\n  };\r\n  detail = (item) => {\r\n    this.childRef.current.getValue(item);\r\n  };\r\n  /**\r\n   * 查看进度\r\n   */\r\n  getProgress = () => {\r\n    this.childProgressRef.current.getValue();\r\n  };\r\n  render() {\r\n    let {\r\n      checkedArr,\r\n      allDownLoading,\r\n      aDownThrottle,\r\n      isAllChecked,\r\n      isNowDown,\r\n    } = this.state;\r\n    return (\r\n      <div>\r\n        <PageHeader\r\n          className=\"site-page-header\"\r\n          onBack={() => this.props?.history?.goBack()}\r\n          title={this.state.title}\r\n          extra={[\r\n            <Button\r\n              key={\"1\"}\r\n              // disabled={!isNowDown}\r\n              onClick={this.getProgress}\r\n              type=\"primary\"\r\n            >\r\n              查看下载进度\r\n            </Button>,\r\n          ]}\r\n        />\r\n        <DrawerCom\r\n          isNowDown={isNowDown}\r\n          aDown={aDownThrottle}\r\n          childRef={this.childRef}\r\n        />\r\n        <DrawerProgress\r\n          setDownStatus={() => {\r\n            this.setState({\r\n              isNowDown: false,\r\n            });\r\n          }}\r\n          childRef={this.childProgressRef}\r\n        />\r\n        <BackTop>\r\n          <div style={style}>UP</div>\r\n        </BackTop>\r\n        <div className=\"affixClass\">\r\n          <Checkbox checked={isAllChecked} onChange={this.onAllChange}>\r\n            全选\r\n          </Checkbox>\r\n          <Statistic value={checkedArr.length} prefix={\"已选中\"} />\r\n          <Popconfirm\r\n            title=\"确定批量下载吗?\"\r\n            onConfirm={this.allDown}\r\n            disabled={isNowDown}\r\n            onCancel={() => {}}\r\n            okText=\"Yes\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<DownloadOutlined />}\r\n              disabled={isNowDown}\r\n              loading={allDownLoading}\r\n            >\r\n              批量下载\r\n            </Button>\r\n          </Popconfirm>\r\n        </div>\r\n        <div className=\"padding24\">\r\n          <Spin spinning={this.state.loading}>\r\n            <List\r\n              className=\"demo-loadmore-list\"\r\n              itemLayout=\"horizontal\"\r\n              dataSource={this.state.data}\r\n              grid={{\r\n                gutter: 16,\r\n                xs: 1,\r\n                sm: 2,\r\n                md: 2,\r\n                lg: 3,\r\n                xl: 3,\r\n                xxl: 3,\r\n              }}\r\n              renderItem={(item, index) => (\r\n                <List.Item>\r\n                  {/* description=\"Ant Design, a design language for background applications, is refined by Ant UED Team\" */}\r\n                  <Row gutter={16} justify=\"space-around\" align=\"middle\">\r\n                    <Col className=\"gutter-row\" span={2}>\r\n                      {/*  */}\r\n                      <Checkbox\r\n                        onChange={(e) => this.onChange(e, item, index)}\r\n                        indeterminate={false}\r\n                        checked={item.checked}\r\n                      />\r\n                    </Col>\r\n\r\n                    <Col className=\"gutter-row\" span={10}>\r\n                      <List.Item.Meta title={item.title} />\r\n                    </Col>\r\n                    <Col className=\"gutter-row\" span={10}>\r\n                      <Space className=\"flexEnd\">\r\n                        <Button onClick={() => this.detail(item)}>查看</Button>\r\n                        <Button\r\n                          onClick={() => aDownThrottle(item)}\r\n                          disabled={isNowDown}\r\n                          type=\"primary\"\r\n                          icon={<DownloadOutlined />}\r\n                        />\r\n                      </Space>\r\n                    </Col>\r\n                  </Row>\r\n                </List.Item>\r\n              )}\r\n            />\r\n          </Spin>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataListCom;\r\n","import { Component } from \"react\";\r\nimport { Result, Button } from \"antd\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nclass Error500 extends Component {\r\n    \r\n  render() {\r\n    return (\r\n      <Result\r\n        status=\"500\"\r\n        title=\"500\"\r\n        subTitle=\"Sorry, something went wrong.\"\r\n        extra={<Button type=\"primary\" onClick={()=>{\r\n            this.props.history.push(\"/\");\r\n        }}>Back Home</Button>}\r\n      />\r\n    );\r\n  }\r\n}\r\nexport default Error500;\r\n","import React from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  // BrowserRouter  as Router,\r\n  Switch,\r\n  Route,\r\n  //   useHistory,\r\n} from \"react-router-dom\";\r\nimport Index from \"./../pages/index/index\";\r\n// import Header from \"./../pages/public/header\";\r\nimport List from \"./../pages/list/index\";\r\nimport Error from \"./../pages/public/500\";\r\nexport default function App() {\r\n  return (\r\n    <Router>\r\n      <div>\r\n        {/* <Header /> */}\r\n        <Switch>\r\n          <Route path=\"/list/:id/:title\" component={List}></Route>\r\n          <Route path=\"/error\" component={Error}></Route>\r\n          <Route path=\"/\">\r\n            <Index />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n","import Router from \"./router/index\"\nfunction App() {\n  return (\n    <>\n      \n      <Router/>\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}